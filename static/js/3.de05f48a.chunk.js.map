{"version":3,"sources":["components/Scanner/perception-toolkit/lib/src/polyfill/barcode-detector.worker.js","components/Scanner/perception-toolkit/lib/src/polyfill/barcode-detector.js","components/Scanner/perception-toolkit/lib/src/utils/is-image-data.js"],"names":["module","exports","Worker","__webpack_require__","p","BarcodeDetectorPolyfill","_this","this","Object","classCallCheck","canvas","document","createElement","ctx","getContext","hasLoaded","worker","console","log","postMessage","isReadyInternal","Promise","resolve","reject","onmessage","e","data","Error","window","addEventListener","terminate","createClass","key","value","_detect","asyncToGenerator","regenerator_default","a","mark","_callee2","pixels","_this2","wrap","_context2","prev","next","abrupt","_ref","_callee","imageData","_context","width","naturalWidth","height","naturalHeight","drawImage","getImageData","evt","stop","_x2","apply","arguments","_x","get","self","script","currentScript","BarcodeDetector","loadedFrom","URL","src","location","toString"],"mappings":"wEAAAA,EAAAC,QAAA,WACA,WAAAC,OAAoBC,EAAAC,EAAuB,iMCGpC,IAAMC,EAAb,WACI,SAAAA,IAAc,IAAAC,EAAAC,KAAAC,OAAAC,EAAA,EAAAD,CAAAD,KAAAF,GACVE,KAAKG,OAASC,SAASC,cAAc,UACrCL,KAAKM,IAAMN,KAAKG,OAAOI,WAAW,MAClCP,KAAKQ,WAAY,EAEjBR,KAAKS,OAAS,IAAId,IAClBe,QAAQC,IAAI,6BAA8BX,KAAKS,QAC/CT,KAAKS,OAAOG,YAHC,KAIbZ,KAAKa,gBAAkB,IAAIC,QAAQ,SAACC,EAASC,GACzCjB,EAAKU,OAAOQ,UAAY,SAACC,GACN,UAAXA,EAAEC,MACFpB,EAAKS,WAAY,EACjBO,EAAQhB,EAAKS,YAEbQ,EAAO,IAAII,MAAM,kCAK7BC,OAAOC,iBAAiB,SAAU,WAC9BvB,EAAKU,OAAOc,cArBxB,OAAAtB,OAAAuB,EAAA,EAAAvB,CAAAH,EAAA,EAAA2B,IAAA,SAAAC,MAAA,eAAAC,EAAA1B,OAAA2B,EAAA,EAAA3B,CAAA4B,EAAAC,EAAAC,KAAA,SAAAC,EA6BiBC,GA7BjB,IAAAC,EAAAlC,KAAA,OAAA6B,EAAAC,EAAAK,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UA8BatC,KAAKQ,UA9BlB,CAAA4B,EAAAE,KAAA,eAAAF,EAAAG,OAAA,SA+BmB,MA/BnB,cAAAH,EAAAG,OAAA,SAiCe,IAAIzB,QAAJ,eAAA0B,EAAAvC,OAAA2B,EAAA,EAAA3B,CAAA4B,EAAAC,EAAAC,KAAY,SAAAU,EAAO1B,GAAP,IAAA2B,EAAA,OAAAb,EAAAC,EAAAK,KAAA,SAAAQ,GAAA,cAAAA,EAAAN,KAAAM,EAAAL,MAAA,OChCQ,qBDkCPL,EClCFd,KDmCVuB,EAAYT,GAEZC,EAAK/B,OAAOyC,MAAQX,EAAOY,aAC3BX,EAAK/B,OAAO2C,OAASb,EAAOc,cAC5Bb,EAAK5B,IAAI0C,UAAUf,EAAQ,EAAG,GAC9BS,EACIR,EAAK5B,IAAI2C,aAAa,EAAG,EAAGf,EAAK/B,OAAOyC,MAAOV,EAAK/B,OAAO2C,SAEnEZ,EAAKzB,OAAOQ,UAAY,SAACiC,GACrBnC,EAAQmC,EAAI/B,OAEhBe,EAAKzB,OAAOG,YAAY8B,GAdT,wBAAAC,EAAAQ,SAAAV,MAAZ,gBAAAW,GAAA,OAAAZ,EAAAa,MAAArD,KAAAsD,YAAA,KAjCf,wBAAAlB,EAAAe,SAAAnB,EAAAhC,SAAA,gBAAAuD,GAAA,OAAA5B,EAAA0B,MAAArD,KAAAsD,YAAA,KAAA7B,IAAA,UAAA+B,IAAA,WA0BQ,OAAOxD,KAAKa,oBA1BpBf,EAAA,GAsDA,KAAM,oBAAqB2D,MAAO,CAC9B,IAAMC,EAAStD,SAASuD,cACxBtC,OAAOuC,gBAAkB9D,EACzBA,EAAwB+D,WAAa,IAAIC,IAAIJ,EAAOK,IAAK1C,OAAO2C,SAASC","file":"static/js/3.de05f48a.chunk.js","sourcesContent":["module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"ab2f2f144d7e368fac54.worker.js\");\n};","import {isImageData} from '../utils/is-image-data.js';\n// eslint-disable-next-line import/no-webpack-loader-syntax\nimport Worker from 'worker-loader!./barcode-detector.worker.js'\n\nexport class BarcodeDetectorPolyfill {\n    constructor() {\n        this.canvas = document.createElement('canvas');\n        this.ctx = this.canvas.getContext('2d');\n        this.hasLoaded = false;\n        let prefix = '/';\n        this.worker = new Worker();\n        console.log('barcode-detector.worker.js', this.worker);\n        this.worker.postMessage(prefix);\n        this.isReadyInternal = new Promise((resolve, reject) => {\n            this.worker.onmessage = (e) => {\n                if (e.data === 'ready') {\n                    this.hasLoaded = true;\n                    resolve(this.hasLoaded);\n                } else {\n                    reject(new Error('Unexpected worker response'));\n                }\n            };\n        });\n\n        window.addEventListener('unload', () => {\n            this.worker.terminate();\n        });\n    }\n\n    get isReady() {\n        return this.isReadyInternal;\n    }\n\n    async detect(pixels) {\n        if (!this.hasLoaded) {\n            return null;\n        }\n        return new Promise(async (resolve) => {\n            let imageData;\n            if (isImageData(pixels)) {\n                imageData = pixels;\n            } else {\n                this.canvas.width = pixels.naturalWidth;\n                this.canvas.height = pixels.naturalHeight;\n                this.ctx.drawImage(pixels, 0, 0);\n                imageData =\n                    this.ctx.getImageData(0, 0, this.canvas.width, this.canvas.height);\n            }\n            this.worker.onmessage = (evt) => {\n                resolve(evt.data);\n            };\n            this.worker.postMessage(imageData);\n        });\n    }\n}\n\n// Prevent overwriting the built-in.\n\nif (!('BarcodeDetector' in self)) {\n    const script = document.currentScript;\n    window.BarcodeDetector = BarcodeDetectorPolyfill;\n    BarcodeDetectorPolyfill.loadedFrom = new URL(script.src, window.location.toString());\n}\n\n","/**\n * Convenience function used internally for detecting `ImageData` vs\n * `HTMLImageElement`.\n */\nexport function isImageData(imgData) {\n    return typeof imgData.data !== 'undefined';\n}\n\n\n"],"sourceRoot":""}